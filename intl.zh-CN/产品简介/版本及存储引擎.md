# 版本及存储引擎 {#concept_qg2_xcr_52b .concept}

云数据库MongoDB支持3.2和3.4两个版本，3.4版本在性能和安全性等方面较3.2版本均有不同程度的提升。

## 数据库版本 {#section_okn_x4c_bfb .section}

MongoDB 3.4版本具有以下优势。

**更快的主备同步**

三节点副本集实例MongoDB3.4 版本在全量同步数据阶段拷贝数据时，同时为所有数据建立索引。之前的版本中，拷贝数据时先建立id索引，其余的索引在数据拷贝完之后集中建立索引。拷贝数据的同时，把同步源上新产生的oplog拉取到本地local数据库的临时集合存储。数据全量拷贝完后，直接读取本地临时集合的oplog，提升了追增量的效率，避免同步源上oplog不足导致无法同步的问题。

**更高效的Sharding集群**：请参见示例：[单击此处](http://www.mongoing.com/archives/3889?spm=a2c4e.11153940.blogcont231377.18.4e827b68xpw2P0)

**更强大的功能**：如`Readonly View`、`Collation`、`Decimal type`等。

**更丰富的aggregation操作**：如`$bucket`、`$graghLookup`。

您可以在新购实例时选择数据库版本，也可以在购买实例后手动升级数据库版本。

**说明：** 

-   支持在实例运行期间手动升级数据库版本MongoDB 3.2至MongoDB 3.4，但版本升级后不支持降级。
-   克隆实例时，MongoDB只支持相同数据库版本之间的克隆，不支持跨版本实例克隆。
-   升级数据库版本期间，实例会重启一次，实例重启过程中完成数据库版本升级。

## 存储引擎 {#section_rsk_bwc_bfb .section}

为最大化满足各类业务场景需求，云数据库MongDB提供了WiredTiger、RocksDB和TerarakDB三中存储引擎供您选择。引擎与版本间的适配关系如下：

|存储引擎|3.2|3.4|
|----|---|---|
|WiredTiger| 三节点副本集实例

 分片集群实例

 | 单节点实例

 三节点副本集实例

 分片集群实例

 |
|RocksDB| 分片集群实例

 | 单节点实例

 三节点副本集实例

 分片集群实例

 |
|TerarkDB|-| 三节点副本集实例16核128G以上规格支持

 |

