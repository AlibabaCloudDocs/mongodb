# 副本集实例设置主备切换 {#task_phh_vjh_kfb .task}

云数据库副本集及集群版的每个Shard都默认含有三个节点，Primary节点及Secondary节点对外提供访问地址，Hidden节点作为日常备节点保障高可用。当某个节点发生故障时，云数据库的高可用系统会自动触发切换操作，保障整体的可用性。同时，云数据库MongoDB提供主备切换功能，供用户在日常容灾演练等场景自行触发切换操作。

当用户在控制台或OpenAPI触发主备切换操作后，系统将实现副本集的Primary节点和Secondary节点的角色互换。本文主要副本集实例如何进行主备切换。

**说明：** 

-   主备切换操作只支持副本集实例和分片集群集群，单节点实例因架构因素，不支持主备切换。
-   触发主备切换后，会产生1次30秒内的连接闪断，请确保应用具备重连机制。
-   只有处于运行中状态的实例才可进行主备切换，集群版实例的主备切换仅要求要进行切换的Shard节点处于正常运行状态。

1.   登录MongoDB[管理控制台](https://mongodb.console.aliyun.com/#/mongodb/list)。 
2.   单击目标实例ID或者单击**![](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/54529/cn_zh/1520491271114/dd.png)** \> **管理**进入基本信息页面。 
3.  在**节点列表**栏，单击**主备切换**，如下图所示： 

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6740/154149778813848_zh-CN.png)

4.   在弹出的主备切换对话框中单击**确定**。 
5.   实例状态变更为**主备切换中**，切换成功后实例状态会修改为**运行中**。 

    约1分钟左右，实例状态恢复正常，主备切换完成。


