# 经典网络平滑迁移到VPC的混访方案

为满足日益增多的网络迁移需求，云数据库MongoDB新增了网络混访功能，可实现在无闪断、无访问中断的情况下将经典网络平滑迁移到专有网络VPC（Virtual Private Cloud）上。

## 前提条件

-   MongoDB 4.2及以下版本的副本集实例或分片集群实例，且分片集群实例的协议类型为MongoDB。
-   实例的网络类型为经典网络。
-   已创建与MongoDB实例所属地域相同的专有网络，创建方法请参见[创建专有网络](~~65398~~)和[创建交换机](~~65387~~)。

## 背景信息

-   在混访期间，不支持将实例的网络类型切换回经典网络。
-   在将MongoDB实例从经典网络切换至专有网络时，可选择保留当前的经典网络连接地址（最长可保留120天）。当实例处于混访期间，MongoDB实例可以同时被经典网络和专有网络内的ECS连接，实现平滑的网络类型切换。
-   在混访期间，您可以逐步将处于经典网络内的ECS和其他云产品切换或迁移至专有网络，直至最终所有产品都使用更为安全的专有网络。

## 操作步骤

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。

2.  在页面左上角，选择实例所在的资源组和地域。

3.  根据实例类型，在左侧导航栏单击**副本集实例列表**或**分片集群实例列表**。

4.  找到目标实例，单击实例ID。

5.  在左侧导航栏，单击**数据库连接**。

6.  在**私网连接 - 经典网络**区域，单击**切换为专有网络**。

7.  在**专有网络**页面，完成以下配置。

    ![设置专有网络](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5163334261/p37314.png)

    1.  选择**专有网络**和**交换机**。

    2.  打开**保留原经典网络**开关。

    3.  选择**过期时间（天）**。

8.  单击**确定**。


