# 使用前须知

您可以轻松地将业务从自建MongoDB数据库转移至云数据库MongoDB，但是云数据库MongoDB本身也有一些使用约束需要您注意。

## 单节点实例

|操作|约束|
|:-|:-|
|实例部署|仅支持在华东1、华东2、华北1、华北2及华南1地域中创建单节点实例。|
|数据库版本|仅支持MongoDB 3.4版本。|
|存储引擎|仅支持WiredTiger引擎。 |
|公网连接地址|由于通过公网连接存在一定安全风险，实例开通后默认只提供内网连接地址。如您需要公网连接地址可[手动申请](/intl.zh-CN/用户指南/管理网络连接/公网连接地址/申请公网连接地址.md)。|
|重启实例|必须通过[MongoDB控制台](https://mongodb.console.aliyun.com/)或调用[RestartDBInstance](/intl.zh-CN/API参考/实例管理/RestartDBInstance.md)接口重启实例。|
|数据迁移|[使用MongoDB工具迁移数据](/intl.zh-CN/快速入门/数据迁移/使用MongoDB工具将自建数据库迁移至单节点实例.md)或[使用DTS迁移数据](/intl.zh-CN/快速入门/数据迁移/使用DTS迁移副本集架构的自建MongoDB数据库上云.md)。|
|数据备份|由于单节点实例的架构的特殊性，单节点实例采用快照备份的方式备份数据。 **说明：** 快照备份可以保留某一时间点的磁盘数据状态。 |
|数据恢复|仅支持[从备份点创建实例](/intl.zh-CN/用户指南/数据恢复/从备份点创建实例.md)。|
|修改实例参数|出于安全和稳定性考虑，部分参数不支持修改，详情请参见[设置数据库参数](/intl.zh-CN/用户指南/参数设置/设置数据库参数.md)。|

## 副本集实例

|操作|约束|
|:-|:-|
|实例部署|实例的版本与存储引擎的选择存在一定的约束性，详情请参见[版本及存储引擎](/intl.zh-CN/产品简介/版本及存储引擎.md)。|
|搭建副本集|-   系统自动搭建的副本集中，提供一个可使用的Primary节点，一个隐藏的Hidden节点（对用户不可见），剩余节点为可使用的Secondary节点。
-   实例运行过程中，您可以根据业务需求变更节点数量（三节点、五节点、七节点），实现按需增删Secondary节点的目的，详情请参见[变更副本集实例节点数](/intl.zh-CN/用户指南/实例管理/变更实例配置/变更副本集实例节点数.md)。

**说明：** 不支持将自建的从节点接入至副本集实例中，如您需要将副本集实例的数据同步至自建数据库进行数据测试或分析，您可以使用MongoShake实现，详情请参见[使用MongoShake实现MongoDB副本集间的单向同步](/intl.zh-CN/用户指南/数据迁移和同步/数据同步/使用MongoShake实现MongoDB副本集间的单向同步.md)。 |
|数据库小版本|如果您的数据库小版本过期或者不在维护列表内，当执行[实例版本升级](/intl.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)、[数据迁移](/intl.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)、[变更实例配置](/intl.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)、[从备份点创建实例](/intl.zh-CN/用户指南/数据恢复/从备份点创建实例.md)、[按时间点新建实例](/intl.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[MongoDB单库恢复](/intl.zh-CN/用户指南/数据恢复/MongoDB单库恢复.md)等操作时，为保证提供更出色的性能和稳定性，系统会默认将您的数据库小版本升级至最新版。|
|重启实例|必须通过[MongoDB控制台](https://mongodb.console.aliyun.com/)或调用[RestartDBInstance](/intl.zh-CN/API参考/实例管理/RestartDBInstance.md)接口重启实例。|
|数据迁移|[使用DTS迁移副本集架构的自建MongoDB数据库上云](/intl.zh-CN/快速入门/数据迁移/使用DTS迁移副本集架构的自建MongoDB数据库上云.md)或[使用MongoDB工具将自建数据库迁移至副本集实例](/intl.zh-CN/快速入门/数据迁移/使用MongoDB工具将自建数据库迁移至副本集实例.md)。|
|数据备份|[自动备份](/intl.zh-CN/用户指南/数据备份/设置自动备份MongoDB数据.md)固定为物理备份方式，[手动备份](/intl.zh-CN/用户指南/数据备份/手动备份MongoDB数据.md)时可选择物理备份或逻辑备份。 **说明：** 当实例的数据库版本为3.2或3.4时，实例中集合加索引的数量需控制在1万以内，否则可能造成物理备份失败。如果您的业务可能会超过此限制，建议[升级数据库版本](/intl.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)至4.0或4.2，您也可以在创建实例时选择数据库版本为4.0或4.2。 |
|数据恢复|-   副本集实例均支持[从备份点创建实例](/intl.zh-CN/用户指南/数据恢复/从备份点创建实例.md)和[按时间点新建实例](/intl.zh-CN/用户指南/数据恢复/按时间点新建实例.md)方式来恢复数据。
-   仅三节点副本集支持[直接恢复备份数据到当前实例](/intl.zh-CN/用户指南/数据恢复/直接恢复备份数据到当前实例.md)。 |
|修改实例参数|出于安全和稳定性考虑，部分参数不支持修改，详情请参见[设置数据库参数](/intl.zh-CN/用户指南/参数设置/设置数据库参数.md)。|

## 分片集群实例

|操作|约束|
|:-|:-|
|实例部署|实例的版本与存储引擎的选择存在一定的约束性，详情请参见[版本及存储引擎](/intl.zh-CN/产品简介/版本及存储引擎.md)。|
|搭建集群节点|-   在创建分片集群实例时，您可以选择Mongos和shard节点的配置和节点数量。
-   实例运行过程中，您也可以添加Mongos和shard节点，暂不支持删除节点的操作，详情请参见[变更配置方案概览](/intl.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|数据库小版本|如果您的数据库小版本过期或者不在维护列表内，当执行[实例版本升级](/intl.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)、[数据迁移](/intl.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)、[变更实例配置](/intl.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)、[从备份点创建实例](/intl.zh-CN/用户指南/数据恢复/从备份点创建实例.md)、[按时间点新建实例](/intl.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[MongoDB单库恢复](/intl.zh-CN/用户指南/数据恢复/MongoDB单库恢复.md)等操作时，为保证提供更出色的性能和稳定性，系统会默认将您的数据库小版本升级至最新版。|
|重启实例|必须通过[MongoDB控制台](https://mongodb.console.aliyun.com/)或调用[RestartDBInstance](/intl.zh-CN/API参考/实例管理/RestartDBInstance.md)接口重启实例。|
|数据迁移|[使用MongoDB工具迁移数据](/intl.zh-CN/快速入门/数据迁移/使用MongoDB工具迁移自建数据库上云.md)或[使用DTS迁移数据](/intl.zh-CN/快速入门/数据迁移/使用DTS迁移分片集群架构的自建MongoDB数据库上云.md)。 |
|数据备份|[自动备份](/intl.zh-CN/用户指南/数据备份/设置自动备份MongoDB数据.md)固定为物理备份方式，[手动备份MongoDB数据](/intl.zh-CN/用户指南/数据备份/手动备份MongoDB数据.md)可选择物理备份或逻辑备份。 **说明：** 当实例的数据库版本为3.2或3.4时，实例中集合加索引的数量需控制在1万以内，否则可能造成物理备份失败。如果您的业务可能会超过此限制，建议[升级数据库版本](/intl.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)至4.0，您也可以在创建实例时选择数据库版本为4.0。 |
|数据恢复|仅支持[按时间点新建实例](/intl.zh-CN/用户指南/数据恢复/按时间点新建实例.md)方式来恢复数据。|
|修改实例参数|出于安全和稳定性考虑，暂不支持修改实例参数。|
|数据读写|分片集群实例中的admin数据库仅支持用户读取，不支持写入。|

