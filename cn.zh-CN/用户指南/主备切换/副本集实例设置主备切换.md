# 副本集实例设置主备切换 {#task_phh_vjh_kfb .task}

MongoDB副本集实例默认含有三个节点， Primary 节点及 Secondary 节点对外提供访问地址，Hidden节点作为日常备节点保障高可用。当某个节点发生故障时，云数据库的高可用系统会自动触发切换操作，保障整体的可用性。同时，云数据库MongoDB提供主备切换功能，供用户在日常容灾演练等场景自行触发切换操作。

通过控制台或[API](../../../../cn.zh-CN/API参考/实例管理/SwitchDBInstanceHA.md#)操作主备切换后，系统将实现副本集实例中Primary节点和Secondary节点的角色互换。

**说明：** 

-   主备切换操作只支持副本集实例和分片集群实例，单节点实例因架构因素，不支持主备切换。
-   触发主备切换后，会产生1次30秒内的连接闪断，请确保应用具备重连机制。
-   实例必须处于运行状态才可进行主备切换。

## 操作步骤 {#section_16w_e9g_1tq .section}

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/#/mongodb/list)。
2.  在页面左上角，选择实例所在的地域。
3.  在左侧导航栏，单击**副本集实例列表**。
4.  找到目标实例，单击实例ID。
5.  在**节点列表**区域框，单击**主备切换**，如下图所示： 

    ![主备切换](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6740/156704175213848_zh-CN.png)

6.  在弹出的主备切换对话框中，单击**确定**。
7.  实例状态变更为**主备切换中**，切换成功后转变为**运行中**。 

    约1分钟左右，实例状态恢复正常，主备切换完成。

    **说明：** 若通过 Primary 节点的连接地址直接连接实例，由于主备关系发生了变化，此时连接是实际是Secondary节点（不具备写权限）。需要使用新的 Primary 节点连接地址连接实例，详情请参考[副本集实例连接说明](../../../../cn.zh-CN/副本集快速入门/连接实例/副本集实例连接说明.md#)。


## 相关问题 {#section_w2v_3r5_n5i .section}

 [为什么高可用系统会触发主备切换](../../../../cn.zh-CN/常见问题/热点问题/为什么高可用系统会触发主备切换.md#)

