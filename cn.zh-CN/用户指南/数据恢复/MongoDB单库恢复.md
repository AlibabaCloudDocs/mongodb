# MongoDB单库恢复

云数据库MongoDB支持单库恢复功能，您可以选择实例运行的某个时间点新建实例，将单个或多个数据库恢复到该时间点，适用于单个或多个数据库快速数据恢复的业务场景。

## 上线说明

自2019年3月26日后新建的实例支持单库恢复，现存的实例将在后续统一开启该功能，具体时间请关注官网公告。

## 前提条件

-   实例的创建时间晚于2019年3月26日。
-   实例属于华北1、华北2、华北3、华北5、华东1、华东2、华南1或亚太东南1（新加坡）地域，其他地域暂不支持。
-   实例类型为副本集实例。
-   实例的数据库版本为3.4、4.0或4.2版本。

    **说明：**

    -   如果实例的数据库版本过低，您可以[升级数据库版本](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)。
    -   数据库版本升级后老版本的备份文件无法用于恢复数据库。
-   实例存储引擎须为WiredTiger。
-   实例备份列表中的备份文件须包含要恢复的数据库。

## 注意事项

-   仅支持基于物理备份的单库恢复，暂不支持基于逻辑备份的单库恢复。
-   执行单库恢复所需的时间和数据量、任务队列、网络等多种因素有关，您只需要等待新实例的运行状态变更为**运行中**即可。
-   如果您的数据库小版本过期或者不在维护列表内，当执行[实例版本升级](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)、[数据迁移](/cn.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)、[变更实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)、[从备份点创建实例](/cn.zh-CN/用户指南/数据恢复/从备份点创建实例.md)、[按时间点新建实例](/cn.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[MongoDB单库恢复](/cn.zh-CN/用户指南/数据恢复/MongoDB单库恢复.md)等操作时，为保证提供更出色的性能和稳定性，系统会默认将您的数据库小版本升级至最新版。

## 费用说明

使用单库恢复功能将创建一个新的实例并产生相关费用，详情请参见[收费项目及价格说明](/cn.zh-CN/产品定价/收费项目及价格说明.md)。

**说明：** 如果您要创建按量付费的实例，请确保您的账户余额大于等于100元。

## 操作步骤

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。

2.  在页面左上角，选择实例所在的资源组和地域。

3.  在左侧导航栏，单击**副本集实例列表**。

4.  找到目标实例，单击实例ID。

5.  在左侧导航栏，单击**备份与恢复**。

6.  在**备份与恢复**页面，单击**按时间点创建实例**。

7.  在弹出的对话框中设置以下参数。

    ![MongoDB单库恢复](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1156819951/p41591.png)

    |配置项目|配置说明|
    |:---|:---|
    |选择要恢复的时间点|选择实例运行的某个时间点进行数据恢复，可以选择7天内的任意时间点进行恢复。 **说明：** 恢复的时间点须早于当前时间且晚于实例创建时间。 |
    |选择要恢复的数据库|    -   **全部数据库**：恢复实例的全部数据库。
    -   **部分数据库**：恢复实例的部分数据库。

您可以直接勾选需恢复的数据库，也可以单击**切换为手动输入数据库**，手动输入需要恢复的数据库。

**说明：** 在手动输入数据库的模式下，如需恢复多个数据库，多个数据库之间用英文逗号（,）分隔。 |

8.  单击**确定**。

9.  在跳转到的购买页面，选择实例的计费模式。

    **说明：**

    -   包年包月：在新建实例时支付费用。适合长期需求，价格比按量付费更实惠，且购买时长越长，折扣越多。
    -   按量付费：后付费，按小时扣费。适合短期需求，用完可立即释放实例，节省费用。
10. 选择新购实例的配置信息，具体配置项及说明请参见[创建副本集实例](/cn.zh-CN/快速入门/创建实例/创建副本集实例.md)。

    **说明：**

    -   不可变更实例的**地域**、**数据库版本**、**存储引擎**和**节点数**。
    -   为保障新实例具备充足的空间来恢复数据，建议配置的存储空间不低于源实例的存储空间。
11. 上述配置完成后，单击**立即购买**。

12. 在确认订单页面，阅读并勾选**云数据库MongoDB版服务协议**，根据提示完成支付流程。


