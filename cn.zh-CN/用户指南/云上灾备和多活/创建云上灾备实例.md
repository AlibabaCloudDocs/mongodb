# 创建云上灾备实例 {#concept_uvj_jgd_5fb .concept}

本文将介绍在MongoDB管理控制台上创建云上灾备实例的操作步骤。

## 限制条件 {#section_nmk_vnh_wfb .section}

-   目前仅副本集实例支持云上灾备功能，单节点实例和分片集群实例暂不支持。
-   源实例数据库版本须是3.2版本或3.4版本，暂不支持4.0版本。
-   源实例存储引擎必须是WiredTiger引擎。
-   不支持在两个现有的MongoDB实例之间直接建立云上灾备。
-   创建的云上灾备实例，仅支持两个MongoDB实例之间同步数据。
-   实例同步后，不支持DDL同步。如果在源实例上进行了DDL操作，目标实例将无法同步源实例的DDL操作。

## 云上灾备支持的地域 {#section_zlq_pth_wfb .section}

详情请参考[支持云上灾备产品的地域](cn.zh-CN/用户指南/云上灾备和多活/云上灾备和多活架构.md#section_kcn_h1l_j2b)。

## 注意事项 {#section_mw4_cpb_wfb .section}

创建目标MongoDB实例之前，后台会将会对源MongoDB实例进行重启，重启过程中系统会将gid加入Oplog中。

**说明：** 如果源实例数据库较大，重启时间将可能达到分钟级。请确认应用程序具备重连机制并在业务低峰期进行操作。

## 费用说明 {#section_sbt_f2c_wfb .section}

-   该操作将会创建一个云上灾备实例，云上灾备实例本身及数据同步的通道流量不收取费用。
-   该操作同时会创建一个新的MongoDB数据库实例，该实例会产生相关费用，具体费用请参见[收费项目及价格说明](../../../../cn.zh-CN/产品定价/收费项目及价格说明.md#)。

## 创建步骤 {#section_p12_dpb_wfb .section}

1.  登录MongoDB[管理控制台](https://mongodb.console.aliyun.com/#/mongodb/list)。
2.  单击页面左侧导航栏的**云上灾备**，跳转至MongoDB云上灾备控制台。
3.  单击页面右侧的**创建灾备**。
4.  在创建灾备对话框中设置源实例和目标实例的信息。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/64557/154408405832541_zh-CN.png)

    |设置项目|说明|
    |:---|:-|
    |源实例地域|选择源实例所属地域。|
    |源实例|选择源实例ID。|
    |目标实例地域|选择用于创建目标实例的地域。|
    |目标实例可用区|选择用于创建目标实例的可用区。|
    |网络类型|选择网络类型为**经典网络**或**专有网络**。    -   经典网络：经典网络中的云服务在网络上不进行隔离，只能依靠云服务自身的安全组或白名单策略来阻挡非法访问。
    -   专有网络（推荐）：也称为VPC（Virtual Private Cloud）。VPC是一种隔离的网络环境，安全性和性能均高于传统的经典网络，专有网络需要事先创建，详情请参考[创建专有网络和交换机](https://help.aliyun.com/document_detail/27710.html)。
**说明：** 源实例和目标实例之间间数据同步采用专用的通道，此处网络类型的选择不影响源实例和目标实例的数据同步。

|
    |目标实例付费类型|选择目标实例的付费类型为**按量付费**或**包年包月**。    -   按量付费：后付费方式，每小时根据实例配置生成1个收费订单，并扣除相应的账户余额。
    -   包年包月：预付费方式，在新建实例时就需要支付费用。
详情请参考[收费项目及价格说明](../../../../cn.zh-CN/产品定价/收费项目及价格说明.md#)。

|
    |灾备备注|输入灾备实例的备注名称。|

    **说明：** 

    -   目标MongoDB实例为三节点副本集实例。
    -   目标MongoDB实例的白名单设置将会和源实例同步。
    -   目标MongoDB实例的存储引擎、数据库版本、规格及存储空间将自动保持与源实例一致，无需设置。
5.  单击**确定**。
6.  勾选**云数据库MongoDB版服务条款**复选框，根据提示完成订单支付。
7.  等待云上灾备实例初始化完成。

## 后续操作 {#section_scy_jgc_wfb .section}

新建立的目标实例需要设置密码，详情请参考[设置密码](../../../../cn.zh-CN/副本集快速入门/设置密码.md#)。

