# 迁移可用区 {#concept_uh2_skz_lhb .concept}

您可以将实例迁移至同一地域内的其它可用区。迁移可用区后，实例的所有属性、规格配置和连接地址都不会改变。

## 前提条件 {#section_ufy_pmz_lhb .section}

-   实例类型为副本集实例。
-   迁移的目标可用区和当前实例的可用区处于同一地域。
-   专有网络的实例在操作迁移可用区之前，请确保目标可用区已创建相应的虚拟交换机，如果尚未创建请[创建虚拟交换机](https://help.aliyun.com/document_detail/65387.html#h2-url-1)。
-   已申请公网连接地址的实例，需要先释放公网连接地址，详情请参考[释放公网连接地址](cn.zh-CN/用户指南/管理网络连接/释放公网连接地址.md#)。

## 注意事项 {#section_n2v_zkz_lhb .section}

-   专有网络的实例在迁移可用区时，不允许更换实例的专有网络。
-   迁移所需时间和网络、任务队列、数据量大小等多种因素有关，请在业务低峰期执行变配操作。
-   迁移可用区过程中会有30秒闪断，请确保应用程序具有重连机制。
-   迁移可用区会造成虚拟IP（VIP，如172.16.88.60）的变更。如果应用连接的是数据库的虚拟IP，则与数据库的连接会断开。建议使用URI地址（如mongodb://root:\*\*\*\*@dds-bpxxxxxxxx.mongodb.rds.aliyuncs.com:3717,dds-bpxxxxxxxx.mongodb.rds.aliyuncs.com:3717/admin?replicaSet=mgset-132xxx），以保障连接的高可用性，详情请参考[副本集实例连接说明](../../../../cn.zh-CN/副本集快速入门/连接实例/副本集实例连接说明.md#)。

## 支持的迁移类型和场景 {#section_gcn_mmz_lhb .section}

|支持的迁移类型|常见场景|
|:------|:---|
|从一个可用区迁移至另一个可用区|将MongoDB实例迁移至ECS实例所属的可用区，同一可用区ECS实例和MongoDB实例通过内网连接拥有更低的网络延迟。|
|从一个可用区迁移至多个可用区|提高实例的容灾能力，实现跨机房容灾。 将三节点副本集中节点，分别部署在同一地域下三个不同的可用区，可承受更高级别的灾难。例如单可用区实例可以承受服务器和机架级别的故障，而多可用区实例可以承受机房级别的故障。

 |
|从多个可用区迁移至一个可用区|为了满足特定功能的要求。|

## 操作步骤 {#section_d1s_4pz_lhb .section}

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/#mongodb/list)。
2.  在页面左上角，选择实例所在的地域。
3.  根据实例类型，在左侧导航栏单击**副本集实例列表**。
4.  找到目标实例，单击实例ID。
5.  在基本信息页面的基本信息区域框中，单击**迁移可用区**。

    ![单击迁移可用区](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/160284/155598465744911_zh-CN.png)

6.  在弹出的将实例迁移至其他可用区对话框中，根据实例网络类型选择操作步骤。

    -   当实例网络类型为专有网络或处于专有/经典网络混访时。

        1.  选择迁移的目标可用区。
        2.  选择目标可用区中的虚拟交换机。
        3.  设置实例可用区的切换时间。
        ![专有网络迁移可用区](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/160284/155598465744913_zh-CN.png)

    -   当实例网络类型为经典网络时。

        1.  选择迁移的目标可用区。
        2.  设置实例可用区的切换时间。
        ![经典网络迁移可用区](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/160284/155598465744912_zh-CN.png)

    **说明：** 

    -   **立即切换**：实例立即开始迁移可用区任务，直到实例状态为**运行中**时，迁移可用区成功。
    -   **可维护时间内进行切换**：选择实例迁移可用区的时间，您可以单击**编辑**修改可维护时间段。

        实例将进行迁移可用区的前置任务并将实例状态变更为**变配中**，并在您设定的时间段内正式开始迁移可用区任务。

7.  单击**确定**。

