# 升级数据库版本

云数据库MongoDB版支持的数据库版本为4.4、4.2、4.0和3.4版本，您可以通过控制台升级数据库版本。

## 数据库版本说明

关于实例支持的版本信息和版本说明，请参见[版本与存储引擎](/cn.zh-CN/产品简介/版本及存储引擎.md)。

## 支持升级的版本

|实例类型|实例支持的版本|可升级到的版本|说明|
|:---|:------|:------|:-|
|单节点实例|3.4、4.0|无|暂不支持升级到4.0版本。如需使用4.0版本，请在创建实例时选择。更多信息，请参见[创建单节点实例](/cn.zh-CN/快速入门/创建实例/创建单节点实例.md)。|
|副本集实例|3.2（已下线）、3.4、4.0、4.2、4.4|3.4、4.0、4.2|暂不支持升级到4.4版本。如需使用4.4版本，请在创建实例时选择。更多信息，请参见[创建副本集实例](/cn.zh-CN/快速入门/创建实例/创建副本集实例.md)。|
|分片集群实例|3.2（已下线）、3.4、4.0、4.2|3.4、4.0、4.2|无|

**说明：** 关于各版本的特性介绍信息，请参见[数据库版本及说明](/cn.zh-CN/产品简介/版本及存储引擎.mdsection_okn_x4c_bfb)。

## 注意事项

-   升级数据库版本所用时间与数据库的数据量有关，请根据业务情况提前安排升级时间。
-   升级数据库版本后不支持降级数据库版本。
-   如果您的数据库小版本过期或者不在维护列表内，当执行[实例版本升级](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)、[数据迁移](/cn.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)、[变更实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)、[从备份点创建实例](/cn.zh-CN/用户指南/数据恢复/从备份点创建实例.md)、[按时间点新建实例](/cn.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[MongoDB单库恢复](/cn.zh-CN/用户指南/数据恢复/MongoDB单库恢复.md)等操作时，为保证提供更出色的性能和稳定性，系统会默认将您的数据库小版本升级至最新版。

## 影响

-   升级采用轮转升级的方式进行，升级过程中会自动对实例进行2~3次重启，请确保在业务低峰执行或确保应用具有重连机制。

    **说明：** 推荐生产环境的应用程序通过Connection String URI连接数据库。当某个节点出现故障时，不会因为主备切换而影响应用的读写操作，详情请参见[副本集实例连接说明]()或[分片集群实例连接说明]()。

-   升级过程中，分片集群实例的均衡器将被关闭，升级完成后会被重新打开。

## 操作步骤

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。

2.  在页面左上角，选择实例所在的资源组和地域。

3.  根据实例类型，在左侧导航栏单击**副本集实例列表**或**分片集群实例列表**。

4.  找到目标实例，单击实例ID。

5.  在**基本信息**区域框，单击**升级数据库版本**，选择需要升级的版本。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9346819951/p21044.png)

6.  在弹出的**升级数据库版本**提示框中，单击**确定**。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0446819951/p21045.png)

    实例运行状态将变为**版本升级中**，等待运行状态变为**运行中**即代表升级任务完成。


