# 变更配置方案概览

您可以通过云数据库MongoDB提供的变更配置功能对当前实例进行变配操作，使实例配置与您的业务需求更加匹配。

## 变配方案

不同类型实例的变配方案及支持的变更项如下：

|变配方案|计费类型|变更类型|支持变更项|
|----|:---|----|:----|
|[变更单节点实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更单节点实例配置.md)|包年包月|升级配置|支持升级实例的**规格**和**存储空间**。|
|降级配置|支持降低实例的**规格**。|
|按量付费|-   升级配置
-   降级配置

|支持变配实例的**规格**和**存储空间**。**说明：**

-   变更**存储空间**时，选择的存储空间需大于实例已占用的存储空间。
-   MongoDB不支持降低实例的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|[变更副本集实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更副本集实例配置.md)|包年包月|升级配置|支持变配实例的**主备节点数**、**只读节点数**、**规格**和**存储空间**。**说明：**

-   MongoDB 4.4版本实例不支持变更**主备节点数**。
-   变更**存储空间**时，选择的存储空间需大于实例已占用的存储空间。 |
|降级配置|支持变配实例的**主备节点数**、**只读节点数**和**规格**。**说明：** MongoDB 4.4版本实例不支持变更**主备节点数**。 |
|按量付费|-   升级配置
-   降级配置

|支持变配实例的**主备节点数**、**规格**和**存储空间**。**说明：**

-   MongoDB 4.4版本实例不支持变更**主备节点数**。
-   变更**存储空间**时，选择的存储空间需大于实例已占用的存储空间。
-   MongoDB不支持降低实例的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|[变更分片集群实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更分片集群实例配置.md)|包年包月|添加Mongos|添加Mongos节点时，支持配置**规格**。|
|添加Shard|添加Shard节点时，支持配置**规格**、**存储空间**和**只读节点数**。**说明：**

-   新增Shard节点的**规格**、**存储空间**和**只读节点数**均需大于或等于已有Shard节点的最高配置。
-   MongoDB不支持降低Shard节点的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|变更Mongos|支持变配Mongos节点的**规格**。|
|变更Shard|支持变配Shard节点的**规格**、**存储空间**和**只读节点数**。**说明：**

-   变更**存储空间**时，选择的存储空间需大于最大实例已占用的存储空间。
-   MongoDB不支持降低Shard节点的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|按量付费|添加Mongos|添加Mongos节点时，支持配置**规格**。|
|添加Shard|添加Shard节点时，支持配置**规格**和**存储空间**。**说明：**

-   变更**存储空间**时，选择的存储空间需大于实例已占用的存储空间。
-   MongoDB不支持降低Shard节点的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |
|变更Mongos|支持变配Mongos节点的**规格**。|
|变更Shard|支持变配Shard节点的**规格**和**存储空间**。**说明：**

-   变更**存储空间**时，选择的存储空间需大于实例已占用的存储空间。
-   MongoDB不支持降低Shard节点的存储空间，如果需要降低存储空间，您可以通过创建实例的方法实现，操作方法请参见[其他变配场景及方案](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。 |

## 其他变配场景及方案

变配场景如下：

-   降低实例或Shard节点的存储空间。
-   增加单节点实例的节点数量。
-   变更实例的架构。
-   变更存储引擎RocksDB或TerarkDB为WiredTiger。
-   将包年包月转换为按量付费。

对于以上变配场景，您可以使用以下方法完成变配。

1.  创建新实例，创建方法请参见[创建单节点实例](/cn.zh-CN/快速入门/创建实例/创建单节点实例.md)、[创建副本集实例](/cn.zh-CN/快速入门/创建实例/创建副本集实例.md)、[创建分片集群实例](/cn.zh-CN/快速入门/创建实例/创建分片集群实例.md)或[创建Serverless实例](/cn.zh-CN/快速入门/创建实例/创建Serverless实例.md) 。

    **说明：**

    -   降低存储空间：新实例的存储空间需大于原实例已用存储空间。
    -   变更节点数：新实例类型选择副本集。
    -   变更实例架构：选择目标架构的实例类型。关于实例架构请参见[云数据库MongoDB系统架构](/cn.zh-CN/产品简介/系统架构/云数据库MongoDB系统架构.md)。
    -   包年包月转换为按量付费：新实例付费类型为按量付费。
    -   备份恢复场景下，您也可以克隆恢复出新实例，具体请参见[按时间点新建实例](/cn.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[从备份点创建实例](/cn.zh-CN/用户指南/数据恢复/从备份点创建实例.md)。
2.  将原实例的数据迁移至新实例，不同实例间的迁移方法请参见[MongoDB数据迁移和同步方案概览](/cn.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)。
3.  验证新实例正常后，将原实例业务切换至新实例。
4.  如果不再需要原实例，您可以选择对应方法释放实例。
    -   包年包月：通过提交工单申请释放，提交工单的方法请参见[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)。
    -   按量付费：手动释放，释放方法请参见[释放实例](/cn.zh-CN/用户指南/实例管理/释放实例或节点.md)。

## 更多信息

版本、存储引擎的介绍和约束关系请参见[版本及存储引擎](/cn.zh-CN/产品简介/版本及存储引擎.md)。

数据库版本的升级方法请参见[升级数据库版本](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)。

