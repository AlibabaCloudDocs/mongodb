# 变更副本集实例节点数

为满足不同业务场景下对数据读取能力的要求，云数据库MongoDB副本集实例支持变更主从节点数和只读节点数。所添加的从节点和只读节点均支持数据读取访问，从而提升副本集实例整体读取性能。

## 背景信息

为满足MongoDB高可用区策略，当前副本集实例从节点个数的变更可选择范围为三节点、五节点、七节点；只读节点个数的变更可选择范围为0~5。

**说明：**

-   单节点实例不支持该操作。
-   分片集群实例不支持只读节点。

副本集实例支持增加节点数量及降低节点数量（从节点数量最低为三节点，只读节点数量最低为0），变更副本集实例节点数将会引起实例费用的变化，详情请参见[收费项目及价格说明](/cn.zh-CN/产品定价/收费项目及价格说明.md)。

## 影响

-   变更配置不会引起数据丢失。
-   实例在执行变更配置前的预操作时，不会对实例的运行产生影响，只有当实例执行正式的变配操作时，才无法执行与数据库、账号、网络等相关的大部分操作，且可能会造成1～2次30秒内的闪断。
-   变更配置的完成时间和网络、任务队列、数据量大小等多种因素有关，请尽量在业务低峰期执行变配操作，并确保您的应用有自动重连机制。
-   如果您的数据库小版本过期或者不在维护列表内，当执行[实例版本升级](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)、[数据迁移](/cn.zh-CN/用户指南/数据迁移和同步/MongoDB数据迁移和同步方案概览.md)、[变更实例配置](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)、[从备份点创建实例](/cn.zh-CN/用户指南/数据恢复/从备份点创建实例.md)、[按时间点新建实例](/cn.zh-CN/用户指南/数据恢复/按时间点新建实例.md)或[MongoDB单库恢复](/cn.zh-CN/用户指南/数据恢复/MongoDB单库恢复.md)等操作时，为保证提供更出色的性能和稳定性，系统会默认将您的数据库小版本升级至最新版。

## 操作步骤

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。

2.  在页面左上角，选择实例所在的资源组和地域。

3.  在左侧导航栏，单击**副本集实例列表**。

4.  找到目标实例，单击实例ID。

5.  在**基本信息**页面，根据实例计费类型选择下述操作步骤。

    1.  实例为包年包月计费模式时，在**基本信息**区域框，单击**升级配置**或**降级配置**。

    2.  实例为按量付费计费模式时，在**基本信息**区域框，单击**变更配置**。

6.  在变配页面，选择实例所需的**主从节点数**和**只读节点数**。

    ![选择节点数](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4346819951/p94815.png)

    **说明：** 如需变配规格和存储空间请参见[变更配置方案概览](/cn.zh-CN/用户指南/实例管理/变更实例配置/变更配置方案概览.md)。

7.  选择变配操作的**切换时间**。

    **说明：**

    -   **数据迁移结束后立即切换**：完成变配流程后，实例立即进入**变配中**状态，直到实例状态为**运行中**时，变配成功。

        部分升级情况将会因连接切换操作带来1-2次30秒内的闪断，您可以按需设置变更生效时间，避免业务影响。

    -   **可维护时间内进行切换**：您可以设定变配的生效时间，实例将在您设定的时间段内变更配置。详情请参见设置可维护时间段。

        若实例变配过程中不会因切换而造成连接闪断，则无论是否设置切换时间，实例变配都将立即生效。

8.  勾选服务条款复选框，根据提示完成支付流程。


副本集实例的节点添加完成后，控制台将出现新增节点（均显示为Secondary，仅角色ID有区别）的连接地址，同时用于高可用连接的Connection String URI地址也将更新。您需要修改应用上的连接地址即可实现高可用和读写分离连接，提升整体使用性能。详情请参见[副本集实例连接说明]()。

