# 数据容灾解决方案

为进一步满足业务场景中高可靠性和数据安全需求，云数据库MongoDB版提供了同城容灾和异地容灾两种解决方案，您可以根据业务需求来选择。

## 注意事项

-   单节点实例不支持同城容灾和异地容灾，您可以将数据迁移至MongoDB 4.2及以下版本的副本集或分片集群实例，迁移方法请参见[将单节点实例的数据迁移至副本集实例或分片集群实例](/cn.zh-CN/用户指南/数据迁移和同步/MongoDB实例间迁移/从MongoDB单节点实例迁移至副本集或分片集群实例.md)。

    **说明：** 如果不再需要单节点实例，您可以根据付费类型释放实例，具体如下：

    -   按量付费：手工释放，释放方法请参见[手动释放](/cn.zh-CN/用户指南/实例管理/释放实例或节点.md)。
    -   包年包月：提交工单申请释放，提交工单的方法请参见[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)
-   副本集实例支持同城容灾和异地容灾。
-   分片集群实例仅支持同城容灾。

## 同城容灾

同城容灾是将副本集中的节点或分片集群实例中的组件分别部署在同一地域下三个不同的可用区，当其中的任一可用区因电力、网络等不可抗因素失去通信时，高可用系统将自动触发切换操作，确保整个实例的持续可用和数据安全。

**说明：**

-   您可以在创建实例时选择多可用区，创建方法请参见[创建多可用区副本集实例](/cn.zh-CN/用户指南/同城容灾解决方案/创建多可用区副本集实例.md)或[创建多可用区分片集群实例](/cn.zh-CN/用户指南/同城容灾解决方案/创建多可用区分片集群实例.md)。
-   如果是MongoDB 4.2及以下版本的副本集实例或分片集群实例，您可以将实例从单可用区迁移至多可用区，迁移方法请参见[迁移可用区](/cn.zh-CN/用户指南/实例管理/迁移可用区.md)。

|实例类型|节点部署策略|
|----|------|
|副本集实例|![副本集节点部署策略](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7256819951/p39357.png) |
|分片集群实例|![分片集群节点部署策略](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9256819951/p46749.png) |

## 异地容灾

云数据库MongoDB版推出的云上灾备功能，助力企业快速复制阿里巴巴异地多活架构，可适用于云上灾备、云上多活、数据同步等场景。

![异地容灾架构图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1846819951/p54471.png)

您可以创建灾备实例，系统将自动搭建基于当前实例的灾备实例，可应对地域级别的故障，创建方法请参见[创建云上灾备实例]()。

在异地容灾架构中，业务使用的实例和灾备数据之间通过Kafka通道完成数据同步，用以保障数据一致性。当实例出现故障时，您可以将业务流量切换至灾备实例，快速恢复服务。

## 更多信息

[云数据库MongoDB版数据安全最佳实践](/cn.zh-CN/最佳实践/云数据库MongoDB版数据安全最佳实践.md)

