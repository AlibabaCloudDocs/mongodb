# 设置自动备份MongoDB数据

云数据库MongoDB会按照默认的备份策略自动备份MongoDB数据。您也可以根据业务需求配置备份策略，实例将按照您设置的备份策略自动备份MongoDB数据。

## 前提条件

MongoDB实例为以下任意一种：

-   单节点实例
-   副本集实例
-   分片集群实例

## 注意事项

-   如果您选择使用物理备份且实例的数据库版本低于MongoDB 4.0，您需要将实例中集合和索引的总数量控制在1万以内，否则可能会导致物理备份失败。如果您的业务需求可能会使实例中集合和索引的总数量超过1万，建议您将数据库版本升级至MongoDB 4.0及以上，升级方法请参见[升级数据库版本](/cn.zh-CN/用户指南/实例管理/数据库升级/升级数据库版本.md)。您也可以在创建实例时选择数据库版本为MongoDB 4.0、4.2或4.4。
-   数据库版本升级后，原版本的MongoDB备份文件无法用于新版本的数据恢复。

## 自动备份说明

-   云数据库MongoDB生成的备份文件存储在阿里云对象存储服务（Object Storage Service，简称 OSS）中，不会占用MongoDB实例的存储空间。关于对象存储服务的更多信息，请参见[阿里云对象存储服务](~~31817~~)。
-   单节点实例和MongoDB 4.4版本副本集实例默认的备份方法为**快照备份**，备份过程中将占用实例的I/O性能。**快照备份**的备份方法能够做到在分钟级完成数据库的恢复。
-   MongoDB 4.2及以下版本副本集实例和分片集群实例默认的备份方法为**物理备份**。物理备份在MongoDB实例的隐藏节点进行，不影响主从节点的读写性能。如果数据量较大，花费的时间可能较长，请您耐心等待。

## 操作步骤

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。

2.  在页面左上角，选择实例所在的资源组和地域。

3.  根据实例类型，在左侧导航栏单击**副本集实例列表**或**分片集群实例列表**。

4.  找到目标实例，单击实例ID。

5.  在左侧导航栏，单击**备份与恢复**。

6.  单击**备份设置**。

    ![MongoDB备份与恢复列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8056819951/p37422.png)

7.  在弹出的对话框中，根据业务需求调整备份设置。

    ![MongoDB设置自动备份策略](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8056819951/p34383.png)

    |配置|说明|
    |:-|:-|
    |**保留天数**|数据保留天数固定为7天，不可变更。|
    |**备份时间**|可以设置为任意时段，以小时为单位。建议您将备份时间设置为业务低峰期的某个时段。|
    |**星期**|可以设置为一星期中的某一天或者某几天。|

8.  单击**确定**。


## 相关文档

[MongoDB数据恢复方案概览](/cn.zh-CN/用户指南/数据恢复/MongoDB数据恢复方案概览.md)

