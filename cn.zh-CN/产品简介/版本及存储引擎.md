# 版本及存储引擎 {#concept_qg2_xcr_52b .concept}

云数据库MongoDB支持3.2版本、3.4版本和4.0版本。3.4版本在性能和安全性等方面较3.2版本均有不同程度的提升，4.0版本更适用于金融等对事务有依赖且使用nosql特性的场景。

## 数据库版本 {#section_okn_x4c_bfb .section}

MongoDB 3.4版本具有以下优势：

-   更快的主备同步

    三节点副本集实例MongoDB3.4版本在全量同步数据阶段拷贝数据时，同时为所有数据建立索引。之前的版本中，拷贝数据时先建立id索引，其余的索引在数据拷贝完之后集中建立索引。拷贝数据的同时，把同步源上新产生的oplog拉取到本地local数据库的临时集合存储。数据全量拷贝完后，直接读取本地临时集合的oplog，提升了追增量的效率，避免同步源上oplog不足导致无法同步的问题。

-   更高效的Sharding集群：请参见示例：[单击此处](http://www.mongoing.com/archives/3889)
-   更强大的功能：如`Readonly View`、`Collation`、`Decimal type`等。
-   更丰富的aggregation操作：如`$bucket`、`$graghLookup`。

MongoDB 4.0版本具有以下优势：

-   将文档模型的速度、灵活性和功能与ACID保证相结合。
-   借助事务特性，使得备节点不再因为同步日志而阻塞读取请求。
-   提供并发的读取和写入能力，使得新增分片shard迁移性能提升了约40%， 新增节点能更快的承载业务压力。

**说明：** 

-   支持在实例运行期间手动升级数据库版本至3.4版本或4.0版本，但版本升级后不支持降级。详情请参见[升级数据库版本](../../../../intl.zh-CN/用户指南/实例管理/升级数据库版本.md#)。
-   克隆实例时，MongoDB只支持相同数据库版本之间的克隆，不支持跨版本实例克隆。

## 存储引擎 {#section_rsk_bwc_bfb .section}

为最大化满足各类业务场景需求，云数据库MongDB提供了WiredTiger、RocksDB和TerarakDB三种存储引擎供您选择。引擎与版本间的适配关系如下：

|存储引擎|3.2版本|3.4版本|4.0版本|
|:---|:----|:----|:----|
|WiredTiger| 副本集实例

 分片集群实例

 | 单节点实例

 副本集实例

 分片集群实例

 | 副本集实例

 分片集群实例

 |
|RocksDB|副本集实例（包年包月计费模式下支持）| 单节点实例

 副本集实例

 |-|
|TerarkDB|-| 副本集实例

 |-|

