# 什么是MongoDB Serverless版

本文介绍MongoDB Serverless版的架构、实现方法及应用场景，帮助您了解MongoDB Serverless版本，使您能够快速判断MongoDB Serverless是否能够满足您的业务需求。

## 产品定义

MongoDB Serverless版是阿里云针对小型企业或个人开发者推出的一款数据库。MongoDB Serverless版本不仅提供代理、网络资源、命名空间、存储空间的垂直资源隔离能力，还提供计算资源按需计费的能力，具有资源用量低、简单易用、弹性灵活和价格低廉等优点，完美地解决了MongoDB偏向中大型用户使用和使用门槛高的问题，帮助中小型客户轻松上云。

## 读写吞吐量CU

MongoDB Serverless版较为重要的是它的服务能力，即读写吞吐量。读写吞吐量的单位为读服务能力单元和写服务能力单元，简称CU（Capacity Unit），是数据读写操作的最小单位。当用户对MongoDB Serverless实例的数据库进行读写操作时，会消耗对应的写服务能力单元和读服务能力单元。

-   1个单位的读服务能力单元表示从数据表中读取一条4 KB数据。
-   1个单位的写服务能力单元表示向数据表写入一条1 KB数据。
-   操作数据大小不足4 KB的部分向上取整。例如写入7.6 KB数据消耗2个单位的写服务能力单元，读取0.1 KB数据消耗1个单位的读服务能力单元。
-   在包年包月购买模式下，100 CU规格表示每秒可以消耗100个读服务能力单元或写服务能力单元，超出规格限制会触发限流。在此模式下，为了应对突发流量，Serverless版提供burst能力，即允许业务短时间内在超出CU规格时预支更多的CU来使用。
-   在按量付费模式下（即将发布），用户购买的实例没有规格概念，按实际消耗的CU个数来收费。

**说明：** 目前MongoDB Serverless版提供了100 CU的读写吞吐能力。100 CU的实例中最多可创建10个数据库，10个数据库中集合（Collection）的总数可达100个。

## 使用限制

MongoDB Serverless版暂不支持弹性扩容功能。

## 产品架构

![产品架构图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6369660061/p167850.png)

MongoDB Serverless版实例创建完成后，系统会自动在VPC中为您申请虚拟IP（VIP），并使用该虚拟IP在代理资源池内随机绑定两个Mongos节点。当提供服务时，会连接其中的一个Mongos节点，如果该节点发生故障无法访问，系统自动将服务数据切换至另一个Mongos节点，同时发生故障的节点会被自动修复挂起，作为备用，保证服务的高可用。

MongoDB Serverless版中，Mongos实现数据逻辑隔离的方式为租户ID（TenantID）+命名空间（Namespace）。

## 与云数据库MongoDB版的区别

MongoDB Serverless版的底层通过MongoDB的分片集群实现。MongoDB Serverless版和MongoDB 通用/独享版的区别如下表所示。

|对比项目|MongoDB 通用/独享版|MongoDB Serverless版|
|----|--------------|-------------------|
|网络类型|-   经典网络
-   专有网络

|专有网络|
|数据库版本|-   3.4
-   4.0
-   4.2
-   4.4

|4.2|
|最大连接数|500~100000|50|
|最大IOPS|8000~100000|不适用|
|存储空间|10 GB~2 TB|10 GB~200 GB|
|服务可用性|支持|支持|
|备份恢复|控制台支持。|通过mongodump、mongorestore工具实现。详情请参见[使用MongoDB工具将自建数据库迁移至分片集群实例](/cn.zh-CN/快速入门/数据迁移/使用MongoDB工具将自建数据库迁移至分片集群实例.md)。|
|实例监控|支持|支持|
|安全管理|-   支持白名单设置。
-   支持安全组设置。
-   支持链路加密。
-   支持数据存储加密。
-   支持BYOK（By Your Own Key）。

|-   支持白名单设置。
-   支持安全组设置。 |
|账号管理|支持控制台创建账号。|提供默认账号，支持修改密码。|
|日志管理|-   支持慢日志。
-   支持审计日志。
-   支持运行日志。

|不支持|
|弹性扩缩容|支持在控制台手动扩缩容。|根据实际业务场景自动扩缩容，节省资源消耗。**说明：** 当前版本暂不支持该功能，将会在后续版本中提供支持。 |
|架构|单独享有一个集群。|多租户，通过租户ID和命名空间的方式实现资源隔离。|
|售价|1026.60元/月（1核2 GB规格，10 GB 存储）|58.4元/月（100 CU规格，10 GB 存储）|

## 用户场景

MongoDB Serverless版适用于如下用户：

-   中小型轻量级的用户：MongoDB Serverless版非常适用于即开即用型的中小客户，无需购买整个集群，按使用量收费。短暂使用成本可以压缩到原来的10%以下。秒级别服务启动和销毁的速度也让客户的应用非常灵活。
-   希望全托管或完全免运维的用户：MongoDB Serverless版后台的运维团队是经过长期技术积累的阿里运维团队，可以非常专业地对集群进行运维、升级、调优和问题处理。对于中小公司提供完全免运维的集群服务，后台服务永远高效稳定。

