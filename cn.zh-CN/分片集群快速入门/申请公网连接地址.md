# 申请公网连接地址 {#concept_p2z_ycq_kgb .concept}

云数据库MongoDB支持申请公网连接地址，用于通过公网连接实例。您可以通过控制台或者[API](../../../../cn.zh-CN/API参考/实例管理/AllocatePublicNetworkAddress.md#)申请公网连接地址。通过公网连接存在一定安全风险，为保障数据安全性，若您不需要公网连接地址，可以[释放公网连接地址](../../../../cn.zh-CN/用户指南/管理网络连接/释放公网连接地址.md#)。

## 连接地址类型说明 {#section_v4t_pl1_mfb .section}

云数据库MongoDB支持内网连接 - 专有网络、内网连接 - 经典网络和公网连接，具体参见下表说明。

|地址类型|说明|
|:---|:-|
|内网连接 - 专有网络| -   专有网络：也称为VPC（Virtual Private Cloud）。VPC是一种隔离的网络环境，安全性和性能均高于传统的经典网络，专有网络需要事先创建，具体设置请参见[新建实例场景下配置专有网络](../../../../cn.zh-CN/用户指南/管理网络连接/新建实例场景下配置专有网络.md#)。
-   如果您的应用部署在ECS实例，且该ECS实例与MongoDB实例在同一地域，且网络类型相同，则MongoDB实例与ECS实例可以通过内网互通。
-   通过内网连接 - 专有网络连接实例时，可以获取更高的安全性和最佳的性能。

 |
|内网连接 - 经典网络|经典网络中的云服务在网络上不进行隔离，只能依靠云服务自身的安全组或白名单策略来阻挡非法访问。如需切换为更安全的专有网络，请参见[切换网络类型](../../../../cn.zh-CN/用户指南/管理网络连接/切换实例网络类型.md#)。|
|公网连接| -   公网连接需要手动申请与释放。
-   无法通过内网访问MongoDB实例时，您需要申请外网地址，例如如下场景。
    -   ECS实例访问MongoDB实例，且ECS实例与MongoDB实例位于不同地域，或者网络类型不同。
    -   阿里云以外的设备访问MongoDB实例。

 **说明：** 使用公网连接地址会存在一定安全风险，建议您将应用迁移到与您的MongoDB实例在同一地域且网络类型相同的ECS实例，然后使用内网连接 - 专有网络。

 |

## 操作步骤 {#section_nmm_bdq_kgb .section}

1.  登录[MongoDB管理控制台](https://mongodb.console.aliyun.com/)。
2.  在页面左上角，选择实例所在的地域。
3.  在左侧导航栏，单击**分片集群实例列表**。
4.  找到目标实例，单击实例ID。
5.  单击左侧导航栏中的**数据库连接**。
6.  数据库连接页面，单击公网连接区域框右侧的**申请公网连接地址**。

    ![申请公网连接地址](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/23846/156799852337037_zh-CN.png)

7.  在弹出的申请公网地址对话框，选择需要申请公网连接地址的**节点类型**和**节点ID**，并单击**确定**。

    ![选择节点](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/23846/156799852359647_zh-CN.png)

    |参数|选项|说明|
    |:-|:-|:-|
    |**节点类型**|**shard**|Shard节点。如果需要为Shard节点申请公网连接地址，您需要先[申请Shard/ConfigServer节点连接地址](../../../../cn.zh-CN/用户指南/管理网络连接/申请Shard__ConfigServer节点连接地址.md#)。 在某些特定场景下（例如集群间数据同步），需要通过外网读取Shard节点的oplog信息，您可以申请相应节点的公网连接地址，以满足业务需求。

 |
    |**cs**|ConfigServer节点。如果需要为ConfigServer节点申请公网连接地址，您需要先[申请Shard/ConfigServer节点连接地址](../../../../cn.zh-CN/用户指南/管理网络连接/申请Shard__ConfigServer节点连接地址.md#)。 在某些特定场景下（例如集群间数据同步），需要通过外网读取ConfigServer节点的配置信息，您可以申请相应节点的公网连接地址，以满足业务需求。

 |
    |**mongos**|Mongos节点。默认选项，一般业务读写数据只需连接至Mongos节点即可。|
    |**节点ID**|选择待申请公网地址的节点ID。|无|

    **说明：** 

    -   关于节点类型的说明请参见[分片集群架构](../../../../cn.zh-CN/产品简介/系统架构/分片集群架构.md#)。
    -   您可根据您的业务需求，重复本步骤来对多个节点申请公网连接地址。连续申请公网连接地址时，需要等待上一个公网连接地址创建完成。
8.  申请操作完成后，MongoDB分片集群实例会提供该节点的公网连接地址、包含该节点的 ConnectionStringURI 地址。详情请参见[分片集群实例连接说明](cn.zh-CN/分片集群快速入门/连接实例/分片集群实例连接说明.md#)。

    **说明：** 申请步骤操作完成后，需要通过申请的公网连接地址来访问该实例时，请将您连接实例终端所在的公网IP地址加入到白名单中，请参见[设置白名单](cn.zh-CN/分片集群快速入门/设置白名单.md#)。


## 更多信息 {#section_0my_3ya_kkt .section}

[如何通过公网连接MongoDB实例](../../../../cn.zh-CN/用户指南/连接实例/如何通过公网连接MongoDB实例.md#)

